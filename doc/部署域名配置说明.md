# Luckee DAO 前端部署域名配置说明

## 🌐 域名配置概述

### 当前域名状态
- **自定义域名**: `https://luckee.cdao.online/` (生产环境)
- **Vercel默认域名**: `https://luckee-dao-frontend.vercel.app/` (备用访问)

### 域名配置流程

#### 1. 使用部署脚本
```bash
# 使用主部署脚本
./scripts/deploy-to-vercel.sh

# 选择部署方式：
# 1) 推送到main分支（自动部署）
# 2) 推送到当前分支（预览部署）  
# 3) 直接部署到Vercel
```

#### 2. 配置自定义域名
```bash
# 运行域名配置脚本
./scripts/configure-domain.sh
```

#### 3. DNS配置
在您的DNS提供商处配置以下记录：

```
Type: A
Name: @
Value: 76.76.19.61

Type: CNAME  
Name: www
Value: cname.vercel-dns.com
```

## 🔧 脚本功能说明

### deploy-to-vercel.sh
- **主要功能**: 完整的Vercel部署脚本
- **支持功能**: 
  - 代码状态检查
  - 分支管理
  - 多种部署方式
  - 自动推送到GitHub触发部署

### test-deployment.sh  
- **主要功能**: 测试已部署站点的功能
- **测试内容**:
  - 主页访问测试
  - 路由功能测试
  - API端点测试

### configure-domain.sh
- **主要功能**: 配置自定义域名
- **支持功能**:
  - 域名添加
  - DNS记录检查
  - 配置状态验证

## 📊 部署环境说明

### 生产环境
- **URL**: `https://luckee.cdao.online/`
- **部署方式**: 推送到main分支自动触发
- **配置**: 使用production.env环境变量

### 预览环境
- **URL**: `https://luckee-dao-frontend-[branch].vercel.app/`
- **部署方式**: 推送到其他分支自动触发
- **配置**: 使用preview环境变量

### 开发环境
- **URL**: `http://localhost:3000/`
- **启动方式**: `npm run dev`
- **配置**: 使用.env.local环境变量

## 🚀 推荐部署流程

### 1. 首次部署
```bash
# 1. 确保代码已提交
git add .
git commit -m "Initial deployment"

# 2. 运行部署脚本
./scripts/deploy-to-vercel.sh
# 选择选项 1: 推送到main分支

# 3. 配置自定义域名
./scripts/configure-domain.sh

# 4. 测试部署
./scripts/test-deployment.sh
```

### 2. 日常部署
```bash
# 1. 提交代码
git add .
git commit -m "Update: feature description"

# 2. 部署到预览环境测试
./scripts/deploy-to-vercel.sh
# 选择选项 2: 推送到当前分支

# 3. 测试通过后部署到生产环境
./scripts/deploy-to-vercel.sh  
# 选择选项 1: 推送到main分支
```

### 3. 紧急部署
```bash
# 直接部署到生产环境
./scripts/deploy-to-vercel.sh
# 选择选项 3: 直接部署到Vercel
```

## 🔍 故障排除

### 常见问题

#### 1. 域名无法访问
```bash
# 检查DNS配置
nslookup luckee.cdao.online

# 检查Vercel域名状态
vercel domains inspect luckee.cdao.online
```

#### 2. 部署失败
```bash
# 查看部署日志
vercel logs

# 检查环境变量
vercel env ls

# 本地构建测试
npm run build
```

#### 3. API路由不工作
```bash
# 检查API函数状态
vercel functions list

# 查看函数日志
vercel logs --follow
```

## 📝 维护建议

### 定期检查
- [ ] 每周检查部署状态
- [ ] 每月检查域名配置
- [ ] 定期更新依赖包
- [ ] 监控性能指标

### 安全维护
- [ ] 定期检查SSL证书状态
- [ ] 监控安全头配置
- [ ] 检查环境变量安全
- [ ] 更新API密钥

---

**文档版本**: 1.0.0  
**创建日期**: 2025年8月  
**维护者**: Luckee DAO 开发团队
